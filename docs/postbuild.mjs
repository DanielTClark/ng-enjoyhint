import {dirname, join} from 'path';
import {readFile, writeFile} from 'fs/promises';

const __dirname = dirname(new URL(import.meta.url).pathname);
const dist = join(__dirname, 'dist');
const rootDir = join(__dirname, '..');
const libDistDir = join(rootDir, 'ng-enjoyhint', 'dist');

const readmeContents = await readFile(join(dist, 'README.md'), 'utf-8');
const disclaimer = `
<!-- 
    This file is generated by 'pnpm run build', so it can include the
    API docs for the library. Do not edit this manually.
    
    To make changes to the README, please edit the 'README.md' file in 
    the 'docs' directory.
-->
`;

const outputContents = disclaimer + '\n' + readmeContents;

await writeFile(join(libDistDir, 'README.md'), outputContents);
await writeFile(join(rootDir, 'README.md'), outputContents);
